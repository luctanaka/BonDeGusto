const mongoose = require('mongoose');
const MenuItem = require('../models/Menu');
require('dotenv').config();

// Connect to MongoDB
const mongoUri = process.env.MONGODB_URI || 'mongodb://localhost:27017/bondegusto';
console.log('üîó Connecting to MongoDB...');
mongoose.connect(mongoUri);

// September 2024 Menu Items
const septemberMenuItems = [
  // ENTRADAS
  {
    nome: 'Bruschetta de Tomate e Manjeric√£o',
    descricao: 'P√£o italiano tostado com tomates frescos, manjeric√£o, alho e azeite extra virgem',
    preco: 18.90,
    categoria: 'entrada',
    ingredientes: ['p√£o italiano', 'tomate', 'manjeric√£o', 'alho', 'azeite', 'sal marinho'],
    alergenos: ['gluten'],
    calorias: 180,
    tempoPreparacao: 10,
    vegetariano: true,
    semGluten: false,
    tags: ['italiano', 'fresco', 'vegetariano'],
    disponivel: true,
    diaDaSemana: 'segunda'
  },
  {
    nome: 'Carpaccio de Salm√£o',
    descricao: 'Fatias finas de salm√£o fresco com alcaparras, r√∫cula e molho de mostarda e mel',
    preco: 32.90,
    categoria: 'entrada',
    ingredientes: ['salm√£o fresco', 'alcaparras', 'r√∫cula', 'mostarda dijon', 'mel', 'azeite'],
    alergenos: ['frutos-do-mar'],
    calorias: 220,
    tempoPreparacao: 15,
    vegetariano: false,
    semGluten: true,
    tags: ['peixe', 'gourmet', 'sem gl√∫ten'],
    disponivel: true,
    diaDaSemana: 'segunda'
  },
  {
    nome: 'Salada Caesar Especial',
    descricao: 'Alface romana, croutons caseiros, parmes√£o e molho caesar tradicional',
    preco: 24.90,
    categoria: 'entrada',
    ingredientes: ['alface romana', 'parmes√£o', 'croutons', 'molho caesar', 'anchovas'],
    alergenos: ['gluten', 'lactose', 'ovos'],
    calorias: 280,
    tempoPreparacao: 8,
    vegetariano: true,
    semGluten: false,
    tags: ['cl√°ssico', 'salada'],
    disponivel: true,
    diaDaSemana: 'terca'
  },
  {
    nome: 'Coxinha Gourmet de Camar√£o',
    descricao: 'Coxinha artesanal recheada com camar√£o refogado e catupiry',
    preco: 16.90,
    categoria: 'entrada',
    ingredientes: ['massa de mandioca', 'camar√£o', 'catupiry', 'temperos'],
    alergenos: ['gluten', 'lactose', 'frutos-do-mar'],
    calorias: 320,
    tempoPreparacao: 20,
    vegetariano: false,
    semGluten: false,
    tags: ['brasileiro', 'frito', 'gourmet'],
    disponivel: true,
    diaDaSemana: 'terca'
  },

  // PRATOS PRINCIPAIS
  {
    nome: 'Picanha Grelhada com Chimichurri',
    descricao: 'Picanha argentina grelhada no ponto, acompanha batatas r√∫sticas e molho chimichurri',
    preco: 68.90,
    categoria: 'prato-principal',
    ingredientes: ['picanha', 'batata', 'salsa', 'coentro', 'alho', 'azeite', 'vinagre'],
    alergenos: [],
    calorias: 650,
    tempoPreparacao: 25,
    vegetariano: false,
    semGluten: true,
    tags: ['carne', 'grelhado', 'argentino'],
    disponivel: true,
    diaDaSemana: 'quarta'
  },
  {
    nome: 'Salm√£o ao Molho de Maracuj√°',
    descricao: 'Fil√© de salm√£o grelhado com molho agridoce de maracuj√°, arroz de coco e legumes',
    preco: 58.90,
    categoria: 'prato-principal',
    ingredientes: ['salm√£o', 'maracuj√°', 'arroz', 'leite de coco', 'br√≥colis', 'cenoura'],
    alergenos: ['frutos-do-mar'],
    calorias: 520,
    tempoPreparacao: 20,
    vegetariano: false,
    semGluten: true,
    tags: ['peixe', 'tropical', 'saud√°vel'],
    disponivel: true,
    diaDaSemana: 'quarta'
  },
  {
    nome: 'Risotto de Cogumelos Selvagens',
    descricao: 'Arroz arb√≥reo cremoso com mix de cogumelos, parmes√£o e trufa',
    preco: 45.90,
    categoria: 'prato-principal',
    ingredientes: ['arroz arb√≥reo', 'cogumelos', 'parmes√£o', 'vinho branco', 'cebola', '√≥leo de trufa'],
    alergenos: ['lactose'],
    calorias: 480,
    tempoPreparacao: 30,
    vegetariano: true,
    semGluten: true,
    tags: ['italiano', 'cremoso', 'vegetariano'],
    disponivel: true,
     diaDaSemana: 'quinta'
   },
   {
    nome: 'Feijoada Completa',
    descricao: 'Feijoada tradicional brasileira com lingui√ßa, bacon, costela e acompanhamentos',
    preco: 52.90,
    categoria: 'prato-principal',
    ingredientes: ['feij√£o preto', 'lingui√ßa', 'bacon', 'costela', 'arroz', 'couve', 'farofa', 'laranja'],
    alergenos: [],
    calorias: 780,
    tempoPreparacao: 45,
    vegetariano: false,
    semGluten: true,
    tags: ['brasileiro', 'tradicional', 'completo'],
    disponivel: true,
    diaDaSemana: 'sabado'
  },
  {
    nome: 'Lasanha Vegetariana',
    descricao: 'Lasanha com berinjela, abobrinha, espinafre, molho de tomate e queijos',
    preco: 38.90,
    categoria: 'prato-principal',
    ingredientes: ['massa de lasanha', 'berinjela', 'abobrinha', 'espinafre', 'molho de tomate', 'mussarela', 'ricota'],
    alergenos: ['gluten', 'lactose'],
    calorias: 420,
    tempoPreparacao: 35,
    vegetariano: true,
    semGluten: false,
    tags: ['italiano', 'vegetariano', 'assado'],
    disponivel: true,
    diaDaSemana: 'quinta'
  },
  {
    nome: 'Moqueca de Camar√£o',
    descricao: 'Camar√µes grandes refogados no leite de coco com dend√™, piment√µes e coentro',
    preco: 62.90,
    categoria: 'prato-principal',
    ingredientes: ['camar√£o', 'leite de coco', 'dend√™', 'piment√£o', 'tomate', 'cebola', 'coentro'],
    alergenos: ['frutos-do-mar'],
    calorias: 580,
    tempoPreparacao: 25,
    vegetariano: false,
    semGluten: true,
    tags: ['brasileiro', 'baiano', 'frutos do mar'],
    disponivel: true,
    diaDaSemana: 'domingo'
  },

  // SOBREMESAS
  {
    nome: 'Tiramisu Cl√°ssico',
    descricao: 'Sobremesa italiana com mascarpone, caf√© espresso, biscoitos e cacau',
    preco: 22.90,
    categoria: 'sobremesa',
    ingredientes: ['mascarpone', 'caf√© espresso', 'biscoitos champagne', 'cacau', 'a√ß√∫car', 'ovos'],
    alergenos: ['lactose', 'gluten', 'ovos'],
    calorias: 380,
    tempoPreparacao: 15,
    vegetariano: true,
    semGluten: false,
    tags: ['italiano', 'caf√©', 'cl√°ssico'],
    disponivel: true,
    diaDaSemana: 'segunda'
  },
  {
    nome: 'Pudim de Leite Condensado',
    descricao: 'Pudim cremoso tradicional com calda de a√ß√∫car caramelizado',
    preco: 18.90,
    categoria: 'sobremesa',
    ingredientes: ['leite condensado', 'leite', 'ovos', 'a√ß√∫car'],
    alergenos: ['lactose', 'ovos'],
    calorias: 320,
    tempoPreparacao: 10,
    vegetariano: true,
    semGluten: true,
    tags: ['brasileiro', 'tradicional', 'cremoso'],
    disponivel: true,
    diaDaSemana: 'terca'
  },
  {
    nome: 'Brownie com Sorvete',
    descricao: 'Brownie de chocolate quente com sorvete de baunilha e calda de chocolate',
    preco: 24.90,
    categoria: 'sobremesa',
    ingredientes: ['chocolate', 'manteiga', 'ovos', 'a√ß√∫car', 'farinha', 'sorvete de baunilha'],
    alergenos: ['gluten', 'lactose', 'ovos'],
    calorias: 450,
    tempoPreparacao: 12,
    vegetariano: true,
    semGluten: false,
    tags: ['chocolate', 'quente', 'americano'],
    disponivel: true,
    diaDaSemana: 'quarta'
  },
  {
    nome: 'Mousse de Maracuj√°',
    descricao: 'Mousse leve e refrescante de maracuj√° com calda da fruta',
    preco: 16.90,
    categoria: 'sobremesa',
    ingredientes: ['maracuj√°', 'leite condensado', 'creme de leite', 'gelatina'],
    alergenos: ['lactose'],
    calorias: 280,
    tempoPreparacao: 8,
    vegetariano: true,
    semGluten: true,
    tags: ['tropical', 'refrescante', 'leve'],
    disponivel: true,
    diaDaSemana: 'quinta'
  },

  // BEBIDAS
  {
    nome: 'Caipirinha de Cacha√ßa',
    descricao: 'Caipirinha tradicional com cacha√ßa artesanal, lim√£o e a√ß√∫car',
    preco: 16.90,
    categoria: 'bebida',
    ingredientes: ['cacha√ßa', 'lim√£o', 'a√ß√∫car', 'gelo'],
    alergenos: [],
    calorias: 180,
    tempoPreparacao: 5,
    vegetariano: true,
    semGluten: true,
    tags: ['brasileiro', 'alco√≥lica', 'refrescante'],
    disponivel: true,
    diaDaSemana: 'sexta'
  },
  {
    nome: 'Suco de Laranja Natural',
    descricao: 'Suco de laranja puro, extra√≠do na hora',
    preco: 8.90,
    categoria: 'bebida',
    ingredientes: ['laranja'],
    alergenos: [],
    calorias: 110,
    tempoPreparacao: 3,
    vegetariano: true,
    vegano: true,
    semGluten: true,
    tags: ['natural', 'vitamina c', 'refrescante'],
    disponivel: true,
    diaDaSemana: 'sabado'
  },
  {
    nome: '√Ågua de Coco Gelada',
    descricao: '√Ågua de coco natural servida bem gelada',
    preco: 6.90,
    categoria: 'bebida',
    ingredientes: ['√°gua de coco'],
    alergenos: [],
    calorias: 45,
    tempoPreparacao: 2,
    vegetariano: true,
    vegano: true,
    semGluten: true,
    tags: ['natural', 'hidratante', 'tropical'],
    disponivel: true,
    diaDaSemana: 'domingo'
  },
  {
    nome: 'Caf√© Espresso',
    descricao: 'Caf√© espresso tradicional italiano',
    preco: 4.90,
    categoria: 'bebida',
    ingredientes: ['caf√©'],
    alergenos: [],
    calorias: 5,
    tempoPreparacao: 2,
    vegetariano: true,
    vegano: true,
    semGluten: true,
    tags: ['caf√©', 'italiano', 'energ√©tico'],
    disponivel: true,
    diaDaSemana: 'segunda'
  },
  {
    nome: 'Refrigerante Lata',
    descricao: 'Refrigerante gelado em lata (Coca-Cola, Guaran√°, Fanta)',
    preco: 5.90,
    categoria: 'bebida',
    ingredientes: ['refrigerante'],
    alergenos: [],
    calorias: 140,
    tempoPreparacao: 1,
    vegetariano: true,
    vegano: true,
    semGluten: true,
    tags: ['gelado', 'gaseificado'],
    disponivel: true,
    diaDaSemana: 'terca'
  },

  // ESPECIAIS DE SETEMBRO
  {
    nome: 'Festival da Primavera - Salada Especial',
    descricao: 'Mix de folhas verdes, morangos, nozes, queijo de cabra e vinagrete de mel',
    preco: 28.90,
    categoria: 'especial',
    ingredientes: ['mix de folhas', 'morango', 'nozes', 'queijo de cabra', 'mel', 'vinagre bals√¢mico'],
    alergenos: ['lactose', 'nozes'],
    calorias: 320,
    tempoPreparacao: 10,
    vegetariano: true,
    semGluten: true,
    tags: ['primavera', 'sazonal', 'especial'],
    disponivel: true,
    ofertaEspecial: true,
    diaDaSemana: 'quarta'
  },
  {
    nome: 'Prato do Chef - Cordeiro com Ervas',
    descricao: 'Carr√© de cordeiro com crosta de ervas, pur√™ de batata doce e redu√ß√£o de vinho tinto',
    preco: 89.90,
    categoria: 'especial',
    ingredientes: ['carr√© de cordeiro', 'ervas finas', 'batata doce', 'vinho tinto', 'manteiga'],
    alergenos: ['lactose'],
    calorias: 720,
    tempoPreparacao: 40,
    vegetariano: false,
    semGluten: true,
    tags: ['chef', 'gourmet', 'especial'],
    disponivel: true,
    ofertaEspecial: true,
    diaDaSemana: 'sexta'
  }
];

async function createSeptemberMenu() {
  try {
    console.log('üçΩÔ∏è  Criando card√°pio de setembro...');
    
    // Clear existing menu items (optional - remove if you want to keep existing items)
    // await MenuItem.deleteMany({});
    // console.log('‚úÖ Itens existentes removidos');
    
    // Insert new menu items
    const createdItems = await MenuItem.insertMany(septemberMenuItems);
    console.log(`‚úÖ ${createdItems.length} itens do card√°pio criados com sucesso!`);
    
    // Display summary by category
    const summary = createdItems.reduce((acc, item) => {
      acc[item.categoria] = (acc[item.categoria] || 0) + 1;
      return acc;
    }, {});
    
    console.log('\nüìä Resumo do card√°pio:');
    Object.entries(summary).forEach(([categoria, count]) => {
      console.log(`   ${categoria}: ${count} itens`);
    });
    
    console.log('\nüéâ Card√°pio de setembro criado com sucesso!');
    console.log('\nüìã Caracter√≠sticas do card√°pio:');
    console.log('   ‚Ä¢ Pratos sazonais de primavera');
    console.log('   ‚Ä¢ Op√ß√µes vegetarianas e veganas');
    console.log('   ‚Ä¢ Informa√ß√µes nutricionais completas');
    console.log('   ‚Ä¢ Especiais do chef');
    console.log('   ‚Ä¢ Bebidas variadas');
    
  } catch (error) {
    console.error('‚ùå Erro ao criar card√°pio:', error);
  } finally {
    mongoose.connection.close();
  }
}

// Execute the script
createSeptemberMenu();